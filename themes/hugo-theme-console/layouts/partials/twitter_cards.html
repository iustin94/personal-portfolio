{{- $twitterImage := "" }}
{{- with .Params.image }}
  {{- $image := $.Resources.GetMatch . }}
  {{- with $image }}
    {{- $thumb := .Resize "400x" }}
    {{- $twitterImage = $thumb.Permalink }}
  {{- end }}
{{- end }}
{{- if not $twitterImage }}
  {{- with .Params.og_image }}
    {{- $twitterImage = . | absURL }}
  {{- end }}
{{- end }}
{{- if not $twitterImage }}
  {{- with .Site.Params.og.image }}
    {{- $twitterImage = . | absURL }}
  {{- end }}
{{- end }}
{{- if $twitterImage }}
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="{{ $twitterImage }}">
{{- else }}
<meta name="twitter:card" content="summary"/>
{{- end }}

<meta name="twitter:title" content="{{ .Title }}"/>
<meta name="twitter:description" content="{{ with .Description }}{{ . }}{{ else }}{{if .IsPage}}{{ .Summary }}{{ else }}{{ with .Site.Params.description }}{{ . }}{{ end }}{{ end }}{{ end -}}"/>
{{ with .Site.Params.Social.twitter -}}
<meta name="twitter:site" content="@{{ . }}"/>
{{ end -}}
{{ range .Site.Params.Authors }}
{{ with .twitter -}}
<meta name="twitter:creator" content="@{{ . }}"/>
{{ end -}}
{{ end -}}